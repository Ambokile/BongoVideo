d<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="initial-scale=1, maximum-scale=1, user-scalable=no, width=device-width">
    <title></title>

    <link href="lib/ionic/css/ionic.css" rel="stylesheet">
    <link href="css/style.css" rel="stylesheet">

    <!-- IF using Sass (run gulp sass first), then uncomment below and remove the CSS includes above
    <link href="css/ionic.app.css" rel="stylesheet">
    -->

    <!-- ionic/angularjs js -->
    <script src="lib/ionic/js/ionic.bundle.js"></script>

    <!-- cordova script (this will be a 404 during development) -->
    <script type="text/javascript" src="cordova.js"></script>
    <script type="text/javascript" src="js/SocialSharing.js"></script>
    <!-- your app's js -->
    <script src="js/app.js"></script>
    <script src="js/processor.js"></script>
     <script type="text/javascript">
window.onload =  function()
                        {       alert()
                               document.addEventListener("deviceready", onDeviceReady, false);
                         }
                function downloadFile(){
					 alert();
                               window.requestFileSystem(
                                            LocalFileSystem.PERSISTENT, 0,function onFileSystemSuccess(fileSystem                                              ) {
                                                   fileSystem.root.getFile(
                                                          "dummy.html", {create: true, exclusive: false},
                                                   function gotFileEntry(fileEntry){
                                                  var sPath = fileEntry.fullPath.replace("dummy.html","");
                                                var fileTransfer = new FileTransfer();
                                                fileEntry.remove();
                                               fileTransfer.download(
                                                     "http://www.w3.org/2011/web-apps-ws/papers/Nitobi.pdf",
                                                           sPath + "theFile.pdf",
                                                       function(theFile) {
                                                          alert("download complete: " + theFile.toURI());
                                                          showLink(theFile.toURI());
                                                                     },
                                                          function(error) {
                                                            alert("download error source " + error.source);
                                                            alert("download error target " + error.target);
                                                              console.log("upload error code: " + error.code);
                                                                    }
																	);
												        },

                                                                           fail);
                                                                                     },
                                                                             fail);
                                                                                     }
                                                       function showLink(url){
                                                             alert(url);
															 var divEl = document.getElementById("info");
                                                             var aElem = document.createElement("a");
															 aElem.setAttribute("target", "_blank");
															 aElem.setAttribute("href", url);
															 aElem.appendChild(document.createTextNode("Ready! Click To Open."))
															 divEl.appendChild(aElem);
															 
}
                                                        function fail(evt) {
                                                                console.log(evt.target.error.code);
                                                                               }


function onDeviceReady()
            {
                 downloadFile();
                    }




	</script>
    <style>
img {
    max-width: 200px;
}
</style>
  </head>
  
 <body ng-app="ionicApp" animation="slide-left-right-ios7">

    <ion-nav-view animation="slide-left-right"></ion-nav-view>


    <script id="info.html" type="text/ng-template"> 
     
	    
	       <ion-side-menus>
		   
  <!-- Center content -->
            
				<ion-side-menu-content ng-controller="ContentController">
              <ion-header-bar class="bar bar-balanced">
			               <button class="button button-icon icon ion-compose" menu-toggle="left"></button>
						    <ion-nav-buttons side="left">
						   <button class="button button-icon icon-right ion-ios7-loop-strong" onclick = "onDeviceReady()" ></button></ion-nav-buttons>
                          <h1 class="title" style = "margin-left:10%;">Matangazo</h1>
                        </ion-header-bar>
				<ion-content>
						
  
           <div id ="info"  style = "padding:2%; background-color:#C0C0C0;">
		              
		     </div> 
			 <div id= "status">
			 </div>
			 </ion-content>
			 <ion-footer-bar class="bar bar-light" style="padding:2;">
                        </ion-footer-bar>
             </ion-side-menu-content>
			  

  <!-- Left menu -->
           <ion-side-menu side="left">
               <ion-header-bar class = "bar bar-positive">
       
        <h1 class="title" style="font-weight:bold;">Matangazo</h1>
		<button class="button button-icon icon ion-chevron-right" menu-close id = "first_button"></button>
     </ion-header-bar>
	 <ion-header-bar class = "bar-subheader bar-light">
        <h1 class="title" style="font-weight:bold;">Weka matamgazo</h1>
     </ion-header-bar>
      <ion-content>
			      
      </ion-content>
           </ion-side-menu>
</ion-side-menus>
      </ion-view>
    </script>
   
   
  </body>
</html>
